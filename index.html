<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CM Card</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ffffff">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="CM Card">

<link rel="apple-touch-icon" sizes="180x180" href="apple-icon.png">
<link rel="icon" type="image/png" href="apple-icon.png">

<style>
:root{
  --bg:#f5f6fa;
  --text:#000;
  --border:#e5e5ea;
  --primary:#5b5bf7;
}

body.dark{
  --bg:#0f0f12;
  --text:#fff;
  --border:#333;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont;
  background:var(--bg);
  color:var(--text);
}

/* HEADER */
.header{
  padding:25px 20px 10px;
}

/* MAIN */
.main{
  margin:20px;
  background:#fff;
  border-radius:24px;
  padding:30px 20px;
  min-height:280px;
}

body.dark .main{
  background:#1a1a1f;
}

/* TAB BAR (NO TOCADA) */
.tabbar{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(255,255,255,.75);
  backdrop-filter:blur(25px);
  border-radius:28px;
  padding:12px 22px;
  display:flex;
  gap:26px;
}

body.dark .tabbar{
  background:rgba(30,30,35,.7);
}

.tab-icon-btn{
  width:52px;
  height:52px;
  border-radius:16px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.tab-icon-btn img{
  width:100%;
  height:100%;
  object-fit:contain;
}

.tab-action{
  width:68px;
  height:68px;
  border-radius:20px;
  margin-top:-12px;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.modal.show{
  display:flex;
}

.modal-content{
  background:#fff;
  width:90%;
  max-width:340px;
  border-radius:22px;
  padding:24px;
}

body.dark .modal-content{
  background:#1a1a1f;
}

.form-group{
  margin-top:10px;
}

.form-group input,
.form-group select{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
}

.form-row{
  display:flex;
  gap:10px;
  margin-top:10px;
}

.form-row input{
  flex:1;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
}

.modal-actions{
  display:flex;
  gap:10px;
  margin-top:20px;
}

.modal-actions button{
  flex:1;
  padding:12px;
  border-radius:14px;
  border:none;
}

.primary-btn{
  background:var(--primary);
  color:#fff;
}
</style>
</head>

<body>

<div class="header">
  <small>Bienvenido a</small>
  <h1>CM Card</h1>
  <p>Gestiona tus tarjetas desde la comodidad de CM Card</p>
</div>

<div class="main">
  <button class="primary-btn" onclick="openModal()">+ Agregar Tarjeta</button>
</div>

<!-- TAB BAR RESTAURADA -->
<div class="tabbar">
  <div class="tab-icon-btn" onclick="openModal()">
    <img src="agregar.PNG">
  </div>

  <div class="tab-icon-btn tab-action" onclick="openActions()">
    <img src="acciones.PNG">
  </div>

  <div class="tab-icon-btn" onclick="openSettings()">
    <img src="ajustes.PNG">
  </div>
</div>

<!-- MODAL -->
<div id="cardModal" class="modal">
  <div class="modal-content">
    <h2>Agregar tarjeta</h2>

    <div class="form-group">
      <input type="text" placeholder="Titular">
    </div>

    <div class="form-group">
      <input id="cardNumber" type="text" placeholder="Número de tarjeta" maxlength="16">
    </div>

    <div class="form-row">
      <input id="expiry" type="text" placeholder="MM/YY" maxlength="5">
      <input id="cvv" type="text" placeholder="PIN" maxlength="4">
    </div>

    <div class="form-group">
      <select>
        <option value="">Moneda</option>
        <option>USD</option>
        <option>EUR</option>
        <option>CUP</option>
      </select>
    </div>

    <div class="form-group">
      <input id="phone" type="text" placeholder="Número de celular">
    </div>

    <div class="modal-actions">
      <button onclick="closeModal()">Cancelar</button>
      <button class="primary-btn">Guardar</button>
    </div>
  </div>
</div>

<script>
function openModal(){
  document.getElementById("cardModal").classList.add("show");
}

function closeModal(){
  document.getElementById("cardModal").classList.remove("show");
}

function onlyNumbers(input){
  input.value = input.value.replace(/\D/g,'');
}

cardNumber.addEventListener("input",()=>{
  onlyNumbers(cardNumber);
  cardNumber.value = cardNumber.value.slice(0,16);
});

cvv.addEventListener("input",()=>{
  onlyNumbers(cvv);
  cvv.value = cvv.value.slice(0,4);
});

phone.addEventListener("input",()=>{
  onlyNumbers(phone);
});

expiry.addEventListener("input",()=>{
  let v = expiry.value.replace(/\D/g,'').slice(0,4);
  expiry.value = v.length > 2 ? v.slice(0,2)+"/"+v.slice(2) : v;
});
</script>

</body>
</html>